<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Comparison - All Services, All Weeks</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
            margin-bottom: 25px;
        }
        
        .header h1 {
            font-size: 2.2em;
            color: #1e3c72;
            margin-bottom: 10px;
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            margin-bottom: 25px;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .input-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #3498db;
            min-width: 200px;
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .input-group input {
            width: 100%;
            padding: 10px;
            font-size: 1.3em;
            border: 2px solid #3498db;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        
        .table-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
        }
        
        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        th {
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            white-space: nowrap;
            border-right: 2px solid rgba(255,255,255,0.3);
        }
        
        th.week-col {
            background: #2c3e50;
            position: sticky;
            left: 0;
            z-index: 101;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #e0e0e0;
            border-right: 1px solid #e0e0e0;
            text-align: center;
        }
        
        td.week-col {
            font-weight: bold;
            background: #f8f9fa;
            position: sticky;
            left: 0;
            z-index: 50;
            border-right: 2px solid #2c3e50;
        }
        
        tbody tr:hover {
            background: #e3f2fd;
        }
        
        .milestone-row {
            background: #fff3cd !important;
        }
        
        .profit {
            color: #27ae60;
            font-weight: bold;
        }
        
        .loss {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .service-group {
            background: #f0f0f0;
        }
        
        .dead-cell {
            background: #ffebee;
            color: #c62828;
            font-weight: bold;
        }
        
        .legend {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #f39c12;
        }
        
        .legend p {
            color: #856404;
            margin: 5px 0;
            font-size: 0.9em;
        }
        
        .service-header {
            writing-mode: horizontal-tb;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ¯ MASTER COMPARISON TABLE</h1>
            <p style="font-size: 1.1em; color: #666; margin-top: 10px;">ALL Services | ALL 100 Weeks | Unlimited Budget Model</p>
        </div>
        
        <div class="controls">
            <div class="input-group">
                <label>Base Weekly Spend ($)</label>
                <input type="number" id="weekly-spend" value="100" min="50" step="50">
            </div>
            
            <div class="input-group">
                <label>Commission Rate (%)</label>
                <input type="number" id="commission-rate" value="15" min="1" max="100">
            </div>
        </div>
        
        <div class="table-container">
            <div class="legend">
                <p><strong>ðŸš€ UNLIMITED BUDGET MODEL - REINVESTING ALL REVENUE:</strong></p>
                <p>â€¢ <strong>Spend:</strong> How much spent on ads this week ($100 base + cumulative revenue)</p>
                <p>â€¢ <strong>Rev:</strong> Revenue earned this week (15% commission on jobs won)</p>
                <p>â€¢ <strong>(Profit/Loss):</strong> Net profit or loss THIS week only</p>
                <p>â€¢ <strong>Cumulative:</strong> ALL revenue earned so far (this amount gets reinvested NEXT week!)</p>
                <p style="margin-top: 10px; padding-top: 10px; border-top: 2px solid #f39c12;">
                    <strong>ðŸ’¡ KEY:</strong> We reinvest the REVENUE ($660K), NOT the profit ($88K). 
                    Next week's spend = $100 + ALL cumulative revenue!
                </p>
            </div>
            
            <table id="master-table">
                <thead>
                    <tr id="header-row">
                        <th class="week-col">Week</th>
                        <!-- Service headers will be added by JavaScript -->
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- Rows will be added by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        const services = [
            { name: "TV Mount PSL", cpc: 6.29, cvr: 0.10, closeRate: 0.35, avgSale: 350 },
            { name: "Handyman JB", cpc: 5.63, cvr: 0.1345, closeRate: 0.30, avgSale: 400 },
            { name: "Handyman Stuart", cpc: 8.00, cvr: 0.1345, closeRate: 0.30, avgSale: 400 },
            { name: "Handyman PSL", cpc: 9.60, cvr: 0.1345, closeRate: 0.30, avgSale: 400 },
            { name: "Pressure Wash", cpc: 9.74, cvr: 0.11, closeRate: 0.28, avgSale: 350 },
            { name: "Drywall", cpc: 10.80, cvr: 0.12, closeRate: 0.35, avgSale: 450 },
            { name: "Bath Remodel", cpc: 16.08, cvr: 0.0261, closeRate: 0.25, avgSale: 15000 },
            { name: "Kitchen Remodel", cpc: 18.65, cvr: 0.0261, closeRate: 0.25, avgSale: 22000 },
            { name: "Garage Floor", cpc: 18.08, cvr: 0.05, closeRate: 0.30, avgSale: 3500 }
        ];
        
        function calculateAllServices() {
            const baseWeeklySpend = parseFloat(document.getElementById('weekly-spend').value) || 100;
            const commissionRate = parseFloat(document.getElementById('commission-rate').value) / 100 || 0.15;
            const maxWeeks = 100;
            
            // Calculate projections for all services
            // UNLIMITED BUDGET MODEL - assume infinite capital available
            const allProjections = services.map(service => {
                let cumulativeRevenue = 0; // All revenue earned so far (for reinvestment)
                const weeks = [];
                
                for (let week = 1; week <= maxWeeks; week++) {
                    // This week's spend = base + ALL cumulative revenue
                    const thisWeekSpend = baseWeeklySpend + cumulativeRevenue;
                    
                    const clicks = thisWeekSpend / service.cpc;
                    const leads = clicks * service.cvr;
                    const jobs = leads * service.closeRate;
                    const commission = service.avgSale * commissionRate;
                    const revenue = jobs * commission;
                    const profit = revenue - thisWeekSpend;
                    
                    // Add this week's revenue to cumulative pot
                    cumulativeRevenue += revenue;
                    
                    weeks.push({
                        isDead: false,
                        spend: thisWeekSpend,
                        revenue: revenue,
                        profit: profit,
                        cumulativeRevenue: cumulativeRevenue
                    });
                }
                
                return weeks;
            });
            
            return allProjections;
        }
        
        function renderTable() {
            const projections = calculateAllServices();
            const maxWeeks = Math.max(...projections.map(p => p.length));
            
            // Build header
            const headerRow = document.getElementById('header-row');
            headerRow.innerHTML = '<th class="week-col">Week</th>';
            services.forEach(service => {
                headerRow.innerHTML += `<th class="service-header">${service.name}<br><small>($${service.cpc})</small></th>`;
            });
            
            // Build rows
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            
            for (let week = 1; week <= maxWeeks; week++) {
                const rowClass = (week % 10 === 0) ? 'milestone-row' : '';
                let row = `<tr class="${rowClass}">`;
                row += `<td class="week-col">Week ${week}</td>`;
                
                services.forEach((service, idx) => {
                    const weekData = projections[idx][week - 1];
                    const profitClass = weekData.profit >= 0 ? 'profit' : 'loss';
                    
                    row += `<td>
                        <div style="font-size: 0.85em; color: #666;">Spend: $${weekData.spend.toFixed(0)}</div>
                        <div style="font-weight: bold;">Rev: $${weekData.revenue.toFixed(0)}</div>
                        <div class="${profitClass}" style="font-size: 0.85em;">(${weekData.profit >= 0 ? '+' : ''}${weekData.profit.toFixed(0)})</div>
                        <div style="font-size: 0.75em; color: #2196f3; margin-top: 3px;">Cumulative: $${weekData.cumulativeRevenue.toFixed(0)}</div>
                    </td>`;
                });
                
                row += '</tr>';
                tbody.innerHTML += row;
            }
        }
        
        // Event listeners
        document.getElementById('weekly-spend').addEventListener('input', renderTable);
        document.getElementById('commission-rate').addEventListener('input', renderTable);
        
        // Initial render
        renderTable();
    </script>
</body>
</html>
